---
layout: post
title: Ремонт JBL 86280-60650
---
![_config.yml]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_logo.png)
Анализ шины I2C и определение неисправности. 

## Диагностика
Потребление неисправного усилителя, при подаче сигнала ACC, поднималось c 0 мА до 800 мА на 1 сек., потом снижалось до 110 мА. Звука нет.  
На плате установлены три микросхемы УНЧ TDF8546TH/N2 подключенных к шине I2C. Выводы для подключения к шине показаны на картинке:
![_config.yml]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_i2c_pinouts.png)  
Анализа данных передаваемых по шине I2C позволил выявить неисправность одной из микросхем УНЧ, что в конечном счете являлось основной неисправностью устройства. 

## Анализ шины
Захват трафика производился с помощью логического анализатора LOGIC-U от компании 6-lab. Адреса микросхем на шине распределены следующим образом:
![_config.yml]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_i2c_address.png)

В УНЧ имеется 10 регистров:
 * 5 регистров для чтения DB1, DB2, DB3, DB4, DB5;
 * 5 регистров для записи IB1, IB2, IB3, IB4, IB5;

Адресации регистров нет. Команда чтения читает 5 регистров для чтения, команда записи пишет в 5 регистров для записи. 
[Описание регистров TDF8546TH]({{ site.baseurl }}/images/repair_i2c_8628060650/TDF8546TH_N1.pdf#page=29)  

На шине будут присутствовать различные команды чтения/записи регистров, но для определения неисправности нужны регистры чтения в определенный момент времени. 
Необходимо найти посылки в которых процессор включает режим диагностики УНЧ. Это делается установкой бита D1 в регистре IB1.

**Instruction byte IB1**

|Bit| Description                           |
|---|---------------------------------------|
|D1 | enable or disable start-up diagnostics|
|   | 0 = start-up diagnostics disabled     |
|   | 1 = start-up diagnostics enabled      |

![_config.yml]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_i2c_start_diag.png)

Запись значения 0x02 в регистр IB1 производится для трех микросхем УНЧ.
```
0.578961750000000,34,0xD4,0x02,Write,ACK
0.579022000000000,34,0xD4,0xE6,Write,ACK
0.579081125000000,34,0xD4,0x10,Write,ACK
0.579142000000000,34,0xD4,0x00,Write,ACK
0.579202875000000,34,0xD4,0xC0,Write,ACK
0.579344125000000,35,0xDC,0x02,Write,ACK
0.579404375000000,35,0xDC,0xE6,Write,ACK
0.579463500000000,35,0xDC,0x10,Write,ACK
0.579524375000000,35,0xDC,0x00,Write,ACK
0.579585250000000,35,0xDC,0xC0,Write,ACK
0.579725875000000,36,0xDE,0x02,Write,ACK
0.579786125000000,36,0xDE,0xE6,Write,ACK
0.579881500000000,36,0xDE,0x10,Write,ACK
0.579942375000000,36,0xDE,0x00,Write,ACK
0.580003250000000,36,0xDE,0xC0,Write,ACK
```
Через ~550 мс считывается результат диагностики.
![_config.yml]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_i2c_result_diag.png)
```
1.134253750000000,49,0xD5,0x20,Read,ACK
1.134307875000000,49,0xD5,0xA0,Read,ACK
1.134362125000000,49,0xD5,0x20,Read,ACK
1.134416375000000,49,0xD5,0x20,Read,ACK
1.134470375000000,49,0xD5,0x00,Read,NAK
1.134602625000000,50,0xDD,0x20,Read,ACK
1.134656750000000,50,0xDD,0xA0,Read,ACK
1.134711125000000,50,0xDD,0x20,Read,ACK
1.134765250000000,50,0xDD,0x20,Read,ACK
1.134819375000000,50,0xDD,0x00,Read,NAK
1.134951000000000,51,0xDF,0x22,Read,ACK <-- проблема
1.135005250000000,51,0xDF,0xA0,Read,ACK
1.135059500000000,51,0xDF,0x20,Read,ACK
1.135113750000000,51,0xDF,0x20,Read,ACK
1.135204125000000,51,0xDF,0x00,Read,NAK
```

Если сопоставить полученные значения с [регистрами]({{ site.baseurl }}/images/repair_i2c_8628060650/TDF8546TH_N1.pdf#page=33),
то получается что в УНЧ с адресами 0xD4 (0xD5) и 0xDE (0xDD) проблемы отсутствуют. Установлены биты открытых линий (не подключены динамики).   
Для УНЧ с адресом 0xDE (0xDF) содержимым регистра DB1 является значение 0x22. Установлены биты D5 и D1.
```
1.134951000000000,51,0xDF,0x22,Read,ACK
```
**Data byte DB1**  

|Bit      |Description           |
|---------|----------------------|
|D5 and D4| 10 = open load       |
|D1       |channel 2 short to VP |
|         |0 = no short to VP    |
|         |1 = short to VP       |

D5 and D4 - это открытая линия, а D1 - это короткое замыкание на + питания.   
При такой неисправности перепроверить результаты диагностики можно омметром. Сопротивление между одной из линий канала 2 и плюсом питания действительно составляло несколько ом, в отличии от десятков кОм на других линиях. 

## Ремонт
Неисправная микросхема была демонтирована. График потребления  тока изменился. Потребление поднималось до ~550 мА и оставалось на этом уровне.
При подключении к ГУ усилитель воспроизводил звук по оставшимся каналам. 

Новая микросхема TDF8546TH/N2 была заказана на [Aliexpress](https://aliexpress.ru/item/1005003136804516.html)  
Исправный усилитель без подключенния к ГУ потребляет 800 мА. 

## Материалы
1. [Datasheet AK4613]({{ site.baseurl }}/images/repair_i2c_8628060650/AK4613-AKM.pdf);
2. [Datasheet V850. Размер 6.7 Мб]({{ site.baseurl }}/images/repair_i2c_8628060650/REN_r01uh0249ej0500_v850essg3_MAH_20120227.pdf);
3. [Datasheet TDF8546TH]({{ site.baseurl }}/images/repair_i2c_8628060650/TDF8546TH_N1.pdf);
4. [Схема подключения усилителя]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_connectors.png);
5. [Слой TOP в высоком разрешении. Размер 9.4 Мб]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_scan_top.jpg);
6. [Слой BOT в высоком разрешении. Размер 10.2 Мб]({{ site.baseurl }}/images/repair_i2c_8628060650/8628060650_scan_bot.jpg);

